{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}
<div class="form-container">
    <div class="form-box">
        <h2>Login</h2>
        <form id="login-form">
            <input type="text" id="username" placeholder="Username" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>
        <p class="form-link">
            Donâ€™t have an account? <a href="{% url 'register' %}">Register</a>
        </p>
    </div>
</div>

<script>
$("#login-form").submit(function(e){
    e.preventDefault();
    $.post("/api/accounts/login/", {
        username: $("#username").val(),
        password: $("#password").val()
    }).done(function(res){
        localStorage.setItem("access", res.access);
        localStorage.setItem("refresh", res.refresh);
        window.location.href = "{% url 'notes' %}";
    }).fail(function(){
        alert("Invalid credentials!");
    });
});
</script>
{% endblock %}
